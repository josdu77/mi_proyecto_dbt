version: 2

models:

  - name: stg_rest_countries
    description: "Modelo staging que normaliza datos de REST Countries"

    tests:
      - dbt_expectations.expect_table_row_count_to_be_between:
          arguments:
            min_value: 1
            max_value: 100000

    columns:
      - name: country_code
        description: "Código ISO alpha-2 del país (PK)"
        tests:
          - not_null
          - unique

      - name: country_name
        description: "Nombre oficial del país"

      - name: region
        description: "Región geográfica"

      - name: subregion
        description: "Subregión geográfica"


  - name: stg_openweather
    description: "Modelo staging que normaliza datos de OpenWeather"

    tests:
      - dbt_expectations.expect_table_row_count_to_be_between:
          arguments:
            min_value: 1
            max_value: 100000

    columns:
      - name: city_name
        description: "Nombre de la ciudad"

      - name: country_code
        description: "Código ISO del país"

      - name: temp
        description: "Temperatura actual en °C"

      - name: humidity
        description: "Humedad relativa en %"

      - name: wind_speed
        description: "Velocidad del viento"

      - name: timezone
        description: "Zona horaria reportada"